<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»™å°å¾è€å¸ˆ ğŸ’Œ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background-color: #fff; 
            font-family: "PingFang SC", "STSong", "Songti SC", "SimSun", serif; 
            overflow: hidden; touch-action: none;
            -webkit-font-smoothing: antialiased;
        }

        /* åŸºç¡€èƒŒæ™¯ */
        .base-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('./bg.jpg') no-repeat bottom center/cover;
            z-index: 1;
        }

        /* å¢å¼ºçš„å¤œè‰²é®ç½©ï¼šæ›´é»‘ã€æ›´æ·±é‚ƒ */
        #night-mask {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            /* é¡¶éƒ¨å…¨é»‘ï¼Œä¸€ç›´å»¶ä¼¸åˆ°60%ï¼Œç„¶åè¿…é€Ÿå˜é€æ˜ä¿æŠ¤åº•éƒ¨ */
            background: linear-gradient(to bottom, 
                rgba(5, 8, 20, 1) 0%, 
                rgba(10, 15, 35, 0.98) 50%, 
                rgba(15, 25, 60, 0.4) 80%,
                transparent 100%);
            opacity: 0; z-index: 2; transition: opacity 3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ç¹æ˜Ÿå±‚ */
        #starCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 70%; z-index: 3; opacity: 0; transition: 4s; }
        #moon {
            position: fixed; top: 10%; right: 15%; font-size: 30px;
            opacity: 0; z-index: 4; transition: 4s ease;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.9));
        }

        /* çƒŸèŠ±å±‚ */
        #fwCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; pointer-events: none; }

        /* æ–‡å­—å®¹å™¨ */
        .text-container {
            position: fixed; top: 18%; left: 50%;
            transform: translateX(-50%); width: 85%; z-index: 10;
        }

        .text-section {
            position: absolute; top: 0; left: 0; width: 100%;
            opacity: 0; visibility: hidden; transform: translateY(20px);
            transition: opacity 1.2s ease, transform 1.2s ease;
            font-size: 18px; line-height: 2.1; color: #2c3e50;
            text-align: justify; text-indent: 2em;
        }
        .text-section.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .text-section.exit { opacity: 0; transform: translateY(-20px); }

        /* æœ€åä¸€é¡µï¼šç²¾è‡´è½æ¬¾ */
        .finale-page { text-align: center !important; text-indent: 0 !important; top: -2vh !important; }
        .brush-font {
            font-family: "Kaiti", "STKaiti", "æ¥·ä½“", serif;
            font-size: 52px; color: #d62828; display: block; margin-bottom: 25px;
            font-weight: bold; letter-spacing: 6px;
            /* æ›´æœ‰è´¨æ„Ÿçš„å‘å…‰æ•ˆæœ */
            text-shadow: 0 0 20px rgba(255, 100, 100, 0.4), 0 0 40px rgba(255, 255, 255, 0.2);
        }
        .signature {
            font-size: 17px; color: #666; font-style: italic;
            margin-top: 40px; display: block; letter-spacing: 2px;
        }

        .night-text { color: #f8fafc !important; text-shadow: 0 2px 12px rgba(0,0,0,0.9); }
        .night-text .signature { color: #cbd5e1 !important; }

        #start-mask {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 100; display: flex; flex-direction: column;
            justify-content: center; align-items: center; transition: 1.5s;
        }
        .start-btn {
            padding: 15px 45px; border: 1px solid #ddd; border-radius: 40px;
            font-size: 16px; color: #888; cursor: pointer; background: none;
        }
    </style>
</head>
<body>

    <div id="start-mask" onclick="init()">
        <div style="font-size: 40px; margin-bottom: 20px;">ğŸ‡</div>
        <button class="start-btn">å¼€å¯å°å¾è€å¸ˆçš„æ–°å¹´è´ºæ–‡</button>
    </div>

    <div class="base-bg"></div>
    <div id="night-mask"></div>
    <canvas id="starCanvas"></canvas>
    <div id="moon">ğŸŒ™</div>
    <canvas id="fwCanvas"></canvas>

    <div class="text-container">
        <div class="text-section active">
            æ–°å¹´å¿«ä¹ï¼Œå°å¾è€å¸ˆï¼Œè§å­—å¦‚é¢ã€‚<br><br>
            å½“è¦å†™ä¸‹è¿™æ®µè¯çš„æ—¶å€™ï¼Œè„‘æµ·ä¸­æƒ³è¯´çš„è¯å¤ªå¤šå¤ªå¤šï¼Œç«Ÿä¸çŸ¥é“ä»ä½•è¯´èµ·ã€‚å»ç¿»äº†ç¿»æˆ‘ä»¬è¿™äº›æ—¥å­çš„èŠå¤©è®°å½•ï¼Œæ‰æƒŠè§‰ä»Šå¤©åˆšå¥½æ˜¯æˆ‘ä»¬è®¤è¯†çš„ç¬¬åä¸ªæ—¥å­ã€‚åå¤©ï¼Œæ”¾åœ¨æ•´ä¸ªäººç”Ÿçš„å°ºåº¦é‡Œå¾ˆçŸ­ï¼ŒçŸ­åˆ°å¯ä»¥å¿½ç•¥ä¸è®¡ï¼›ä½†è¿™åå¤©èŠå¤©çš„å¯†åº¦å’Œå¿«ä¹çš„æµ“åº¦ï¼Œå´è®©æˆ‘æœ‰äº†ä¸€ç§ä¸ä½ è®¤è¯†äº†å¾ˆä¹…å¾ˆä¹…çš„é”™è§‰ï¼Œâ€œå€¾ç›–å¦‚æ•…â€ä¾¿è¯´çš„æ˜¯è¿™èˆ¬ç½¢ã€‚
        </div>
        <div class="text-section">
            2026å¹´åˆï¼Œæœ¬ä»¥ä¸ºè¿™åˆæ˜¯å¹³å¹³æ·¡æ·¡çš„ä¸€å¹´ï¼Œç­‰æˆç»©ã€å‡†å¤‡æ¯•è®¾ï¼Œå’Œæˆ‘çš„å‰21å¹´çš„ç”Ÿæ´»ä¸€èˆ¬æ— äºŒï¼›ç„¶è€Œç°åœ¨çœ‹æ¥ï¼Œé‡è§ä½ ï¼Œæ˜¯2026å¹´æˆ‘çš„ç¬¬ä¸€ä¸ªã€ä¹Ÿæ˜¯æœ€å¤§çš„å½©è›‹ã€‚è®°å¾—è·Ÿä½ è¯´è¿‡ï¼Œæˆ‘é€‰æ‹©å»ä¸Šæµ·å¤šæ˜¯å› ä¸ºæˆ‘çš„äº‹ä¸šå‘å±•ï¼›ä½†æ˜¯ï¼Œå¦‚æœç°åœ¨è¦æˆ‘å†è¯´ä¸€æ¬¡ï¼Œé™¤äº†åŸæ¥è¯´è¿‡çš„ç†ç”±ï¼Œæˆ‘ä¼šå†è¯´ä¸€å¥ï¼šé‚£é‡Œæœ‰æˆ‘æƒ³è¦è§åˆ°ã€å´è¿˜æ²¡æœ‰è§åˆ°çš„äººï¼Œä¾¿æ˜¯ä½ ã€‚
        </div>
        <div class="text-section">
            è¯´çœŸçš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘æ˜¯åšäº†ä»€ä¹ˆæ‹¯æ•‘é“¶æ²³ç³»çš„äº‹æƒ…ï¼Œç„¶åè®©æˆ‘ä¸ä½ æœ‰äº†äº¤é›†ã€‚ä»¥å‰åœ°ç†ä¹¦ä¸Šçš„ä¸Šæµ·åªæ˜¯ä¸€ä¸ªç¹åçš„åæ ‡ï¼Œè€Œç°åœ¨ï¼Œé‚£ä¸ªåŸå¸‚åœ¨æˆ‘çš„åœ°å›¾ä¸Šçªç„¶æœ‰äº†å…·ä½“çš„æ¸©åº¦ã€‚æˆ‘ç›¸ä¿¡æˆ‘ä»¬ä¹‹é—´ä¸åªæ˜¯è¿™çŸ­çŸ­åå¤©çš„ç¼˜åˆ†ï¼Œä»¥åä¸ä½ çš„æ•…äº‹è¿˜ä¼šæœ‰å¾ˆå¤šå¾ˆå¤šï¼Œæˆ‘ä¹Ÿæ­£æ»¡å¿ƒæœŸå¾…ç€ã€‚
        </div>
        <div class="text-section">
            å¥½å•¦å¥½å•¦ï¼Œç…½æƒ…ç¯èŠ‚å°±åˆ°è¿™å§å“ˆå“ˆå“ˆã€‚æœ€åæˆ‘æƒ³è¯´çš„æ˜¯ï¼šè™½ç„¶æ„Ÿè§‰å’Œä½ è®¤è¯†äº†å¾ˆä¹…å¾ˆä¹…ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³å’Œä½ ä¸€èµ·æ›´ä¹…æ›´ä¹…ï¼Œè€Œä¸”æˆ‘ä¸€å®šä¼šæœç€è¿™ä¸ªç›®æ ‡å»åŠªåŠ›ã€‚å¸Œæœ›æˆ‘çš„å°å¾è€å¸ˆå‘¢ï¼Œåœ¨æ–°çš„ä¸€å¹´é‡Œä¸€å®šè¦å¤©å¤©å¼€å¿ƒï¼Œç„¶åå¿ƒä¸­æ‰€æƒ³çš†æœ‰æˆï¼Œä¸€é©¬å¹³å·æ— æ‰€æƒ§ï¼ï¼ï¼
        </div>
        <div class="text-section" id="pre-final">
            æ„¿æ–°å¹´çš„çƒŸç«èƒ½å¸¦å»æˆ‘çš„ç¥ç¦ã€‚æˆ‘çš„å°å¾è€å¸ˆï¼Œæ–°å¹´å¿«ä¹ï¼ï¼ï¼<br><br>
            <span style="font-size: 14px; opacity: 0.8;">ï¼ˆPS.è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™è´ºæ–‡å“¦ï¼Œæœ‰äº›åœ°æ–¹ä¼šè¯ä¸è¾¾æ„ï¼Œä½†æˆ‘ç›¸ä¿¡ä½ ä¸€å®šå¯ä»¥çœ‹æ‡‚å“’ï¼Œä½ ä¹Ÿä¸è®¸è¯´æˆ‘å†™çš„ä¸å¥½å“ˆå“ˆå“ˆï¼ï¼‰</span>
        </div>
        <div class="text-section finale-page" id="last-trigger">
            <span class="brush-font">æ–°å¹´å¿«ä¹</span>
            <span class="signature">â€” your å°å¼ åŒå­¦ â€”</span>
        </div>
    </div>

    <audio id="bgm" loop src="./bgm.mp3"></audio>

    <script>
        let curr = 0;
        const divs = document.querySelectorAll('.text-section');
        let busy = false;
        let fwIntensity = 0.05; // åˆå§‹çƒŸèŠ±å¯†åº¦

        function init() {
            document.getElementById('start-mask').style.opacity = '0';
            setTimeout(() => document.getElementById('start-mask').style.display = 'none', 1500);
            document.getElementById('bgm').play();
            drawStars();
            listen();
            startFire(); // æå‰å¯åŠ¨çƒŸèŠ±å¾ªç¯ï¼Œä½†é€šè¿‡å¯†åº¦æ§åˆ¶æ˜¾ç¤º
        }

        function drawStars() {
            const canvas = document.getElementById('starCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight * 0.7;
            const stars = [];
            for (let i = 0; i < 180; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 1.1,
                    phase: Math.random() * Math.PI * 2
                });
            }
            function frame() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "white";
                stars.forEach(s => {
                    const opacity = (Math.sin(Date.now() * 0.0015 + s.phase) + 1) * 0.5;
                    ctx.globalAlpha = opacity;
                    ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2); ctx.fill();
                });
                requestAnimationFrame(frame);
            }
            frame();
        }

        function switchPage(idx) {
            if (idx < 0 || idx >= divs.length || busy) return;
            busy = true;
            const active = document.querySelector('.text-section.active');
            active.classList.add('exit');
            active.classList.remove('active');

            setTimeout(() => {
                active.classList.remove('exit');
                divs[idx].classList.add('active');
                
                const mask = document.getElementById('night-mask');
                const stars = document.getElementById('starCanvas');
                const moon = document.getElementById('moon');

                if (idx >= divs.length - 2) {
                    mask.style.opacity = '1';
                    stars.style.opacity = '1';
                    moon.style.opacity = '1';
                    divs[idx].classList.add('night-text');
                    // æœ€åä¸€é¡µï¼ŒçƒŸèŠ±å¯†åº¦å¤§å¹…æå‡
                    fwIntensity = (idx === divs.length - 1) ? 0.15 : 0.08;
                } else {
                    mask.style.opacity = '0';
                    stars.style.opacity = '0';
                    moon.style.opacity = '0';
                    fwIntensity = 0; // å…¶ä»–é¡µä¸æ˜¾ç¤ºçƒŸèŠ±
                }
                setTimeout(() => { busy = false; }, 800);
            }, 800);
        }

        function listen() {
            let sy = 0;
            window.addEventListener('touchstart', e => { sy = e.touches[0].pageY; });
            window.addEventListener('touchend', e => {
                let ey = e.changedTouches[0].pageY;
                if (sy - ey > 60 && curr < divs.length - 1) switchPage(++curr);
                else if (ey - sy > 60 && curr > 0) switchPage(--curr);
            });
        }

        // æ ¸å¿ƒçƒŸèŠ±å¼•æ“ï¼šé«˜äº®ã€å³ç‡ƒå³ç­ã€ä¸æŒ¡èƒŒæ™¯
        function startFire() {
            const canvas = document.getElementById('fwCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];

            function Particle(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.vel = { 
                    x: (Math.random() - 0.5) * 8, 
                    y: (Math.random() - 0.5) * 8 
                };
                this.alpha = 1;
                this.decay = Math.random() * 0.02 + 0.015;
                this.size = Math.random() * 2 + 1;
                this.draw = () => {
                    ctx.save();
                    ctx.globalAlpha = this.alpha;
                    ctx.beginPath(); 
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                    ctx.fillStyle = this.color;
                    // å¢åŠ å‘å…‰ç‰¹æ•ˆ
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = this.color;
                    ctx.fill();
                    ctx.restore();
                };
                this.update = () => {
                    this.x += this.vel.x;
                    this.y += this.vel.y;
                    this.vel.y += 0.1; // é‡åŠ›æ„Ÿ
                    this.alpha -= this.decay;
                };
            }

            function loop() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // æ ¹æ®å½“å‰é¡µé¢çš„å¼ºåº¦æ¦‚ç‡ç”ŸæˆçƒŸèŠ±
                if (Math.random() < fwIntensity) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * (canvas.height * 0.45);
                    const color = `hsl(${Math.random()*360}, 100%, 75%)`;
                    // æ¯æœµçƒŸèŠ±ç²’å­æ•°å¢åŠ 
                    for(let i=0; i<50; i++) particles.push(new Particle(x, y, color));
                }
                particles = particles.filter(p => p.alpha > 0);
                particles.forEach(p => { p.update(); p.draw(); });
                requestAnimationFrame(loop);
            }
            loop();
        }
    </script>
</body>
</html>
